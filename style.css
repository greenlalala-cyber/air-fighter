:root{
  --line:rgba(255,255,255,.16);
  --text:rgba(10,20,40,.92);
  --muted:rgba(10,20,40,.62);
  --accent:#2F5BFF;
  --accent2:#22D3EE;
  --good:#16A34A;
  --warn:#F59E0B;
  --bad:#EF4444;
  --shadow: 0 18px 50px rgba(0,0,0,.22);
}

*{ box-sizing:border-box; }
html,body{ height:100%; }
body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
  color:var(--text);
  background:
    radial-gradient(1200px 900px at 25% 10%, rgba(34,211,238,.28), transparent 58%),
    radial-gradient(1100px 900px at 80% 20%, rgba(47,91,255,.18), transparent 60%),
    linear-gradient(180deg, #DDF3FF, #BFE6FF);
}

.app{ min-height:100%; display:flex; flex-direction:column; }

.topbar{
  display:flex;
  gap:12px;
  align-items:center;
  justify-content:space-between;
  padding:12px 14px;
  border-bottom:1px solid rgba(0,0,0,.10);
  background: rgba(255,255,255,.55);
  backdrop-filter: blur(10px);
  position:sticky;
  top:0;
  z-index:10;
}

.brand{ display:flex; align-items:center; gap:10px; min-width:180px; }
.dot{
  width:10px;height:10px;border-radius:999px;
  background: linear-gradient(135deg, var(--accent), var(--accent2));
  box-shadow: 0 0 16px rgba(47,91,255,.25);
}
.title .name{ font-weight:900; letter-spacing:.08em; font-size:12px; }
.title .sub{ font-size:12px; color:rgba(0,0,0,.55); margin-top:2px; }

.hud{ display:flex; gap:8px; flex-wrap:wrap; justify-content:flex-end; }
.hudItem{
  display:flex; gap:8px; align-items:center;
  padding:7px 10px;
  border:1px solid rgba(0,0,0,.12);
  border-radius:999px;
  background: rgba(255,255,255,.62);
}
.hudItem .k{ font-size:12px; color:rgba(0,0,0,.55); }
.hudItem .v{ font-size:12px; font-weight:800; }

.stage{
  flex:1;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  padding:12px;
  gap:10px;
}

/* 1) Fit on one screen: cap height, reduce width */
.canvasWrap{
  position:relative;
  width:min(92vw, 460px);
  height:min(60vh, 640px);
  border-radius:18px;
  overflow:hidden;
  border:1px solid rgba(0,0,0,.14);
  background: rgba(255,255,255,.50);
  box-shadow: var(--shadow);
}

canvas{ width:100%; height:100%; display:block; }

.overlay{
  position:absolute;
  inset:0;
  display:flex;
  align-items:center;
  justify-content:center;
  background: radial-gradient(800px 600px at 50% 30%, rgba(47,91,255,.22), rgba(255,255,255,.65));
  backdrop-filter: blur(8px);
}

.panel{
  width:min(92%, 520px);
  border-radius:20px;
  padding:16px 14px;
  border:1px solid rgba(0,0,0,.12);
  background: linear-gradient(180deg, rgba(255,255,255,.88), rgba(255,255,255,.68));
  box-shadow: var(--shadow);
}
.panelTitle{
  font-size:20px;
  font-weight:950;
  letter-spacing:.06em;
  margin-bottom:10px;
}
.panelText{
  font-size:14px;
  color:rgba(0,0,0,.72);
  line-height:1.5;
}
.panelBtns{
  display:flex;
  gap:10px;
  margin-top:12px;
  flex-wrap:wrap;
}
.panelBtns.smallRow{ margin-top:10px; }
.tiny{ margin-top:10px; color:rgba(0,0,0,.55); font-size:12px; }

.btn{
  border:1px solid rgba(0,0,0,.14);
  background: rgba(255,255,255,.70);
  color: rgba(0,0,0,.80);
  padding:10px 12px;
  border-radius:14px;
  cursor:pointer;
  font-weight:900;
  letter-spacing:.02em;
  transition: transform .08s ease, background .2s ease, border-color .2s ease;
}
.btn:hover{ background: rgba(255,255,255,.88); border-color: rgba(0,0,0,.20); }
.btn:active{ transform: translateY(1px) scale(.99); }
.btn.primary{
  border-color: rgba(47,91,255,.35);
  background: linear-gradient(135deg, rgba(47,91,255,.18), rgba(34,211,238,.18));
}

.toast{
  position:absolute;
  left:12px;
  bottom:12px;
  max-width: calc(100% - 24px);
  padding:10px 12px;
  border-radius:14px;
  border:1px solid rgba(0,0,0,.14);
  background: rgba(255,255,255,.78);
  color: rgba(0,0,0,.78);
  font-size:13px;
  opacity:0;
  transform: translateY(6px);
  transition: opacity .25s ease, transform .25s ease;
  pointer-events:none;
}
.toast.show{ opacity:1; transform: translateY(0); }

.mobileControls{
  width:min(92vw, 460px);
  display:flex;
  gap:12px;
  justify-content:space-between;
  align-items:center;
}

.pad{
  position:relative;
  width:120px; height:120px;
  border-radius:999px;
  border:1px solid rgba(0,0,0,.14);
  background: rgba(255,255,255,.62);
  box-shadow: 0 10px 22px rgba(0,0,0,.10);
  touch-action:none;
}
.padRing{
  position:absolute; inset:12px;
  border-radius:999px;
  border:1px dashed rgba(0,0,0,.18);
}
.padStick{
  position:absolute;
  left:50%; top:50%;
  width:50px; height:50px;
  margin-left:-25px; margin-top:-25px;
  border-radius:999px;
  background: linear-gradient(135deg, rgba(47,91,255,.35), rgba(34,211,238,.28));
  border:1px solid rgba(0,0,0,.14);
  box-shadow: 0 0 18px rgba(47,91,255,.18);
}

.actions{ display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; }
.btn.action{
  width:104px;
  height:52px;
  border-radius:16px;
  display:flex;
  align-items:center;
  justify-content:center;
  font-size:14px;
}

.footer{
  padding:10px 14px 14px;
  border-top:1px solid rgba(0,0,0,.10);
  color:rgba(0,0,0,.55);
}

@media (min-width: 900px){
  .stage{ flex-direction:row; align-items:flex-start; justify-content:center; gap:16px; }
  .canvasWrap{ height:min(74vh, 740px); width:min(56vw, 520px); }
  .mobileControls{
    width: 260px;
    flex-direction:column;
    align-items:stretch;
    justify-content:flex-start;
  }
  .actions{ flex-direction:column; }
  .btn.action{ width:100%; }
}
/* =========================
   Mobile layout improvements
   ========================= */
@media (max-width: 520px){
  /* 2) Reduce upper info area height */
  .topbar{
    padding: 6px 10px;              /* was larger */
    gap: 8px;
  }

  .title .name{
    font-size: 11px;                /* slightly smaller */
  }

  .title .sub{
    display: none;                  /* remove subtitle to save vertical space */
  }

  .hud{
    gap: 6px;                       /* tighter */
  }

  .hudItem{
    padding: 5px 8px;               /* smaller pills */
    gap: 6px;
  }

  .hudItem .k,
  .hudItem .v{
    font-size: 11px;                /* tighter text */
  }

  /* Keep canvas + controls from pushing content too far down */
  .stage{
    padding: 10px;
    gap: 8px;
  }

  /* 1) Double size for FIRE button (compared to others) */
  .actions{
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-auto-rows: auto;
    gap: 10px;
  }

  #btnFire{
    grid-column: 1 / span 2;        /* FIRE takes full row */
    height: 104px;                  /* ~2x */
    font-size: 18px;                /* larger label */
    border-radius: 20px;
  }

  /* Keep Focus/Pause normal size */
  #btnFocus,
  #btnPause{
    height: 52px;
    font-size: 14px;
    border-radius: 16px;
  }
}

